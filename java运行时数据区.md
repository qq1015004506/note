# java运行时数据区:

## 所有线程共享区域: 堆,方法区

### 永久代/元空间:

方法区是一种逻辑概念,是被堆中的永久代(1.7)或元空间(1.8)实现的.

方法区负责存放各种类信息和静态变量,常量.可以说方法区在堆里面.

堆用来存放对象,分为三个部分:新生代,老年代,永久代(1.7)/元空间(1.8).

### 新生代:

新生代里面有三个部分:

Eden: From: To = 8: 1: 1

这样划分的依据是经过多年实践经验发现这样效率最高.

第一次东西都在Eden区

Eden满了之后就会发生minor GC

把不用的对象全部回收,正在用对象就会放到From里面.

下一次Eden和From区存活的对象放到to.

再下一次把Eden和to区的东西放到From里.

保证一个区域有空闲空间会让调度更加方便,这也是为什么要8:1:1而不是8:2

### 老年代:

如果有一个对象能经受住这样来回折腾15次（默认参数，可以改）就被升级到老年代。

或者Eden往from或者to区传东西放不下了(毕竟十份只占了一份)

就会放到老年代,老年代为新生代分配对象提供担保空间.

老年代满了会发生Major GC

## 线程独占区域(每个线程都有一份)

(这些区域): 程序计数器,本地方法栈,虚拟机栈

### 虚拟机栈:

每调用一次函数就生成一个栈帧,栈帧会压入虚拟机栈中.栈帧包含以下内容:

1. 局部变量表:存放函数运行所需要的数据(8种基本类型和引用类型).

2. 操作栈:用来进行各种计算,如同汇编语言的栈

3. 动态链接:因为接口是不确定的,动态链接负责链接到真正的实例对象上

4. 返回地址:保存了方法被调用的位置.

### 本地方法栈:

为运行本地方法提供的栈,和虚拟机栈类似.本地方法大概就是与硬件和操作系统交互的方法.

### 程序计数器:

记录程序运行到哪条语句了.

